<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>KasirKu - Laporan Produk</title>
    <link rel="stylesheet" href="/css/laporan.css"> <!-- Reuse stok.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="sidebar">
        <div class="logo-area">
          <h1 class="logo">KasirKu</h1>
        </div>
        <ul class="nav-links">
          <li><a href="/produk" class="<%= currentPage === 'produk' ? 'active' : '' %>"><i class="fas fa-box"></i> Produk</a></li>
          <li><a href="/penjualan" class="<%= currentPage === 'penjualan' ? 'active' : '' %>"><i class="fas fa-cash-register"></i> Penjualan</a></li>
          <li><a href="/stok" class="<%= currentPage === 'stok' ? 'active' : '' %>"><i class="fas fa-warehouse"></i> Stok</a></li>
          <li><a href="/laporan" class="<%= currentPage === 'laporan' ? 'active' : '' %>"><i class="fas fa-chart-line"></i> Laporan</a></li>
        </ul>
        <a href="/login" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
      </div>
      
    <!-- Main Content -->
    <div class="main-content">
        <div class="header">
            <h1>Laporan Produk</h1>
        </div>

        <!-- Search & Generate PDF -->
        <div class="search-bar">
            <label for="search">Cari Produk:</label>
            <input type="text" id="search" placeholder="Cari Nama Produk..." onkeyup="filterProducts()">
            <a href="/penjualan/export-excel" class="generate-pdf-btn" style="background-color: #2ecc71; margin-left: 10px; text-decoration: none;">
                <i class="fas fa-file-excel"></i> Export ke Excel
              </a>
            <form method="POST" action="/laporan/generate-pdf" style="display: inline;">
                <button type="submit" class="generate-pdf-btn">ðŸ“„ Generate PDF</button>
            </form>
        </div>

        <!-- Produk Table -->
        <table class="product-table">
            <thead>
                <tr>
                    <th>Nama Produk</th>
                    <th>Harga</th>
                    <th>Stok</th>
                </tr>
            </thead>
            <tbody id="product-list">
                <% produkList.forEach(product => { %>
                    <tr>
                        <td><%= product.nama %></td>
                        <td>Rp. <%= product.harga.toLocaleString('id-ID') %></td>
                        <td><%= product.stok %></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>

    <script>
        function filterProducts() {
            const input = document.getElementById('search').value.toUpperCase();
            const rows = document.getElementById('product-list').getElementsByTagName('tr');
            for (let row of rows) {
                const name = row.getElementsByTagName('td')[0];
                row.style.display = name && name.textContent.toUpperCase().includes(input) ? '' : 'none';
            }
        }
    </script>
</body>
</html>
